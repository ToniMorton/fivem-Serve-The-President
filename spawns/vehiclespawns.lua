local vehicleSpawns = {
	{model = "maverick", x = 2819.8, y = -638.9, z = 1.8, h = 0.0},
	{model = "carbonrs", x = 1369.1, y = -581.7, z = 73.9, h = 0.0},
	{model = "dominator", x = -972.2, y = -1020.9, z = 40.5, h = 0.0},
	{model = "moonbeam", x = 716.3, y = -1282.5, z = 25.6, h = 0.0},
	{model = "barracks", x = 260.4, y = -1515.4, z = 28.7, h = 65.0},
	{model = "bulldozer", x = -199.5, y = -1081.9, z = 21.2, h = 340.1},
	{model = "futo", x = -662.8, y = -712.1, z = 26.7, h = 183.6},
	{model = "patriot", x = -323.3, y = -217.5, z = 37.1, h = 232.4},
	{model = "sanchez", x = 31.9, y = -420.4, z = 39.5, h = 67.3},
	{model = "buzzard2", x = 115.8, y = -439.9, z = 40.7, h = 338.5},
	{model = "ruffian", x = 384.1, y = -427.8, z = 44.2, h = 15.4},
	{model = "sentinel", x = 275.7, y = -323.7, z = 44.5, h = 162.5},
	{model = "annihilator", x = -1533.2, y = -567.3, z = 33.1, h = 39.1},
	{model = "dinghy", x = -934.8, y = -1464.3, z = -0.5, h = 287.4},
	{model = "burrito4", x = -1065.1, y = -1566.4, z = 4.1, h = 214.5},
	{model = "cognoscenti2", x = -1339.9, y = -1078.4, z = 6.5, h = 207.9},
	{model = "besra", x = -1453.7, y = -1368.5, z = 2.6, h = 8.6},
	{model = "technical", x = -1689.9, y = -1068.6, z = 1.6, h = 48.8},
	{model = "cargobob", x = -735.1, y = -1455.9, z = 4.5, h = 318.3},
	{model = "dodo", x = -1448.4, y = -2875.4, z = 13.5, h = 239.8},
	{model = "luxor", x = -1277.4, y = -3392.3, z = 13.5, h = 323.6},
	{model = "mammatus", x = -796.2, y = -3285.7, z = 13.5, h = 149.9},
	{model = "baller6", x = 724.8, y = -3172.3, z = 5.4, h = 352.9},
	{model = "annihilator", x = 949.5, y = -3179.5, z = 5.4, h = 91.6},
	{model = "opressor", x = 1284.1, y = -3329.3, z = 5.4, h = 86.2},
	{model = "dump", x = 804.5, y = -2472.6, z = 21.6, h = 266.7},
	{model = "policet", x = 1110.5, y = -2299.2, z = 30.0, h = 353.4},
	{model = "insurgent2", x = 1634.3, y = -1944.8, z = 103.7, h = 72.5},
	{model = "stockade", x = 1766.2, y = -1424.2, z = 112.9, h = 46.3},
	{model = "frogger", x = 2831.1, y = -1459.5, z = 10.9, h = 337.3},
	{model = "speeder", x = 2783.1, y = -1412.1, z = 1.0, h = 18.7},
	{model = "infernus2", x = -2348.5, y = 290.4, z = 169.5, h = 298.5},
	{model = "jester", x = -2331.5, y = 262.3, z = 169.6, h = 21.9},
	{model = "voltic", x = -2349.9, y = 266.3, z = 165.1, h = 25.4},
	{model = "zentorno", x = -2350.7, y = 306.8, z = 169.5, h = 292.4},
	{model = "faggio", x = -2300.2, y = 368.7, z = 174.6, h = 277.2},
	{model = "akuma", x = -2279.4, y = 389.4, z = 174.6, h = 348.6},
	{model = "panto", x = -2297.8, y = 441.5, z = 174.5, h = 354.7},
	{model = "taxi", x = -2315.8, y = 441.9, z = 174.5, h = 355.7},
	{model = "trash", x = -1722.4, y = 177.9, z = 63.8, h = 219.5},
	{model = "technical", x = -273.8, y = 319.9, z = 92.7, h = 84.4},
	{model = "riot", x = -310.7, y = 227.6, z = 87.3, h = 281.3},
	{model = "frogger2", x = -142.0, y = 205.5, z = 91.5, h = 268.4},
	{model = "reaper", x = 67.1, y = 121.4, z = 78.5, h = 160.2},
	{model = "firetruk", x = 546.9, y = -139.7, z = 58.4, h = 88.3},
	{model = "opressor", x = 1133.2, y = 83.2, z = 80.2, h = 208.1},
	{model = "schafter5", x = 1115.0, y = 50.9, z = 80.2, h = 271.1},
	{model = "limo2", x = 866.8, y = -286.0, z = 65.1, h = 109.7},
	{model = "xls2", x = -53.6, y = -792.3, z = 43.6, h = 329.2},
	{model = "insurgent2", x = -995.0, y = -288.8, z = 37.3, h = 209.0},
	{model = "maverick", x = -1866.8, y = -1213.9, z = 13.0, h = 229.2},
	{model = "lectro", x = -1823.1, y = -1253.1, z = 13.0, h = 6.3},
	{model = "akuma", x = -1818.5, y = -1248.8, z = 13.0, h = 47.4},
	{model = "dukes2", x = -1816.9, y = -1239.1, z = 13.0, h = 82.0},
	{model = "kuruma2", x = -1791.6, y = -1196.0, z = 13.0, h = 47.3},
	{model = "burrito3", x = -1814.7, y = -1176.1, z = 13.0, h = 230.6},
	{model = "gp1", x = -1792.0, y = -1185.1, z = 13.0, h = 326.3},
	{model = "voltic2", x = -1714.7, y = -1118.9, z = 13.2, h = 48.7},
	{model = "emperor2", x = -1726.2, y = -1126.2, z = 13.0, h = 46.1},
	{model = "buzzard2", x = -1473.3, y = -1473.4, z = 1.7, h = 197.4},
	{model = "tug", x = -1474.8, y = -1567.8, z = 0.5, h = 180.0},
	{model = "schafter6", x = 2528.9, y = -384.6, z = 93.0, h = 271.2},
	{model = "schafter5", x = 2563.1, y = -383.9, z = 93.0, h = 0.0},
	{model = "limo2", x = 2519.6, y = -310.1, z = 93.0, h = 268.7},
	{model = "washington", x = 2544.9, y = -316.6, z = 93.0, h = 188.3},
	{model = "buzzard2", x = 2526.1, y = -391.5, z = 93.0, h = 356.5},
	{model = "volatus", x = 2526.1, y = -375.8, z = 93.0, h = 352.5},
	{model = "riot", x = 2540.8, y = -447.8, z = 93.0, h = 314.3},
	{model = "fbi", x = 2542.2, y = -465.8, z = 93.1, h = 311.0},
	{model = "buzzard", x = 2511.1, y = -426.7, z = 118.2, h = 45.5},
	{model = "policeb", x = 2575.2, y = -379.1, z = 93.0, h = 0.0},
	{model = "fbi2", x = 2575.6, y = -365.9, z = 93.0, h = 0.0},
	{model = "xls2", x = 2598.1, y = -323.3, z = 92.5, h = 180.0},
	{model = "seashark", x = 2853.6, y = -667.8, z = -0.5, h = 249.1},
	{model = "monster", x = 2704.6, y = -829.9, z = 26.3, h = 19.3},
	{model = "maverick", x = 1892.5, y = -886.9, z = 118.5, h = 123.6},
	{model = "stretch", x = 1657.4, y = -894.2, z = 66.9, h = 229.9},
	{model = "buzzard", x = -332.1, y = -1962.5, z = 66.5, h = 45.1},
	{model = "brickade", x = -753.9, y = -2025.5, z = 8.8, h = 352.6},
	{model = "sabregt2", x = -112.2, y = -1414.1, z = 29.6, h = 187.9},
	{model = "voodoo2", x = -229.0, y = -1700.8, z = 33.5, h = 304.3},
	{model = "sultanrs", x = 105.5, y = -1940.9, z = 20.3, h = 50.0},
	{model = "voltic2", x = 375.8, y = -1692.3, z = 47.8, h = 323.2},
	{model = "buffalo3", x = 402.9, y = -1633.8, z = 28.8, h = 320.4},
	{model = "comet", x = 831.8, y = -1517.1, z = 11.0, h = 307.6},
	{model = "police", x = 452.7, y = -1022.8, z = 28.5, h = 95.3},
	{model = "polmav", x = 449.3, y = -981.3, z = 43.7, h = 272.3},
	{model = "kuruma2", x = 448.2, y = -583.4, z = 28.2, h = 263.3},
	{model = "banshee", x = 6.6, y = -616.8, z = 35.7, h = 162.9},
	{model = "cog552", x = -108.7, y = -608.2, z = 35.8, h = 161.0},
	{model = "lynx", x = -2074.7, y = 239.6, z = 122.6, h = 200.0},
	{model = "massacro2", x = -1588.2, y = -86.4, z = 53.6, h = 271.6},
	{model = "baller6", x = -1588.2, y = -86.4, z = 53.6, h = 271.6},
	{model = "verlierer2", x = -1370.8, y = 57.7, z = 53.2, h = 183.4},
	{model = "caddy", x = -1127.3, y = 35.8, z = 51.5, h = 159.1},
	{model = "blade", x = -1198.8, y = -152.8, z = 39.6, h = 44.7},
	{model = "hexer", x = -818.0, y = -132.3, z = 28.2, h = 33.6},
	{model = "pranger", x = -1211.5, y = -681.5, z = 25.4, h = 314.9},
	{model = "windsor", x = -1164.9, y = -534.2, z = 30.1, h = 210.3},
	{model = "utillitruk", x = -436.6, y = -441.0, z = 32.3, h = 353.9},
	{model = "vader", x = -909.7, y = -2485.0, z = 14.5, h = 258.6},
	{model = "stunt", x = -970.8, y = -3018.5, z = 13.5, h = 59.5},
	{model = "supervolito", x = -1146.1, y = -2864.7, z = 13.5, h = 0.0},
	{model = "insurgent2", x = -1204.5, y = -2427.2, z = 13.5, h = 151.2},
	{model = "zentorno", x = -644.8, y = -1735.6, z = 23.6, h = 352.6},
	{model = "dune4", x = 75.0, y = -2256.0, z = 5.3, h = 270.3},
	{model = "toro2", x = 78.7, y = -2269.0, z = -0.8, h = 75.6},
	{model = "jackal", x = 87.5, y = -2534.6, z = 5.2, h = 141.3},
	{model = "dukes", x = -157.6, y = -2451.1, z = 5.3, h = 315.7},
	{model = "gauntlet", x = -286.3, y = -2394.0, z = 5.2, h = 293.5},
	{model = "vestra", x = -443.7, y = -2449.8, z = 5.2, h = 230.2},
	{model = "opressor", x = -407.3, y = -2830.7, z = 5.2, h = 131.8},
	{model = "seashark", x = -537.1, y = -2919.0, z = 1.0, h = 111.0},
	{model = "hakuchou", x = -1836.0, y = -382.0, z = 49.3, h = 54.6},
	{model = "mesa", x = -2077.0, y = -318.2, z = 12.4, h = 174.8}
}

local vehicleClassBlips = {
	[0] = { -- Compacts
		sprite = 326, entry = "_COMPACT", text = "Compact Spawn"
	},
	[1] = { -- Sedans
		sprite = 326, entry = "_SEDAN", text = "Sedan Spawn"
	},
	[2] = { -- SUVs
		sprite = 326, entry = "_SUV", text = "SUV Spawn"
	},
	[3] = { -- Coupes
		sprite = 326, entry = "_COUPE", text = "Coupe Spawn"
	},
	[4] = { -- Muscle
		sprite = 326, entry = "_MUSCLE", text = "Muscle Spawn"
	},
	[5] = { -- Sports Classics
		sprite = 326, entry = "_SPORTC", text = "Sport Classic Spawn"
	},
	[6] = { -- Sports
		sprite = 326, entry = "_SPORT", text = "Sport Spawn"
	},
	[7] = { -- Super
		sprite = 326, entry = "_SUPER", text = "Super Spawn"
	},
	[8] = { -- Motorcycles
		sprite = 512, entry = "_BIKE", text = "Motorcycle Spawn"
	},
	[9] = { -- Off-road
		sprite = 326, entry = "_OFFROAD", text = "Off-road Spawn"
	},
	[10] = { -- Industrial
		sprite = 326, entry = "_INDUSTRIAL", text = "Industrial Spawn"
	},
	[11] = { -- Utility
		sprite = 477, entry = "_UTIL", text = "Utility Spawn"
	},
	[12] = { -- Vans
		sprite = 67, entry = "_VAN", text = "Van Spawn"
	},
	[13] = { -- Cycles
		sprite = 348, entry = "_CYCLE", text = "Cycle Spawn"
	},
	[14] = { -- Boats
		sprite = 427, entry = "_BOAT", text = "Boat Spawn"
	},
	[15] = { -- Helicopters
		sprite = 43, entry = "_HELI", text = "Helicopter Spawn"
	},
	[16] = { -- Planes
		sprite = 307, entry = "_PLANE", text = "Plane Spawn"
	},
	[17] = { -- Service
		sprite = 56, entry = "_SERVICE", text = "Service Spawn"
	},
	[18] = { -- Emergency
		sprite = 56, entry = "_EMERGENCY", text = "Emergency Spawn"
	},
	[19] = { -- Military
		sprite = 460, entry = "_MILITARY", text = "Military Spawn"
	},
	[20] = { -- Commercial
		sprite = 477, entry = "_COMMERCIAL", text = "Commercial Spawn"
	},
	[21] = { -- Trains (never going to use them but why not)
		sprite = 326, entry = "_TRAIN", text = "Train Spawn"
	}
}

DecorRegister("_STP_VEHICLE", 3)

for _, vehicleSpawn in ipairs(vehicleSpawns) do
	local blip = AddBlipForCoord(vehicleSpawn.x, vehicleSpawn.y, vehicleSpawn.z)
	SetBlipAsShortRange(blip, true)

	local blipinfo = vehicleClassBlips[GetVehicleClassFromName(GetHashKey(vehicleSpawn.model))]
	SetBlipSprite(blip, blipinfo.sprite)
	AddTextEntry(blipinfo.entry, blipinfo.text)
	SetBlipNameFromTextFile(blip, blipinfo.entry)
end

Citizen.CreateThread(function()
	while true do
		Wait(1000)

		if DoesEntityExist(PlayerPedId()) then
			local playerCoords = GetEntityCoords(PlayerPedId(), true)
			for i, vehicleSpawn in ipairs(vehicleSpawns) do
				if GetDistanceBetweenCoords(playerCoords.x, playerCoords.y, playerCoords.z, vehicleSpawn.x, vehicleSpawn.y,
					vehicleSpawn.z, true) < 200.0 then
						if not IsModelValid(GetHashKey(vehicleSpawn.model)) then
							print("Model " .. vehicleSpawn.model .. " in invalid. Fix this RIGHT NOW!")
						else
							local canSpawn = true
							for nearbyVehicle in EnumerateVehicles() do
								local nearbyVehicleCoords = GetEntityCoords(nearbyVehicle, true)
								if GetDistanceBetweenCoords(nearbyVehicleCoords.x, nearbyVehicleCoords.y, nearbyVehicleCoords.z,
									vehicleSpawn.x, vehicleSpawn.y, vehicleSpawn.z, true) < 100.0
									and GetEntityModel(nearbyVehicle) == GetHashKey(vehicleSpawn.model)
									and DecorExistOn(nearbyVehicle, "_STP_VEHICLE")
									and DecorGetInt(nearbyVehicle, "_STP_VEHICLE") == i then
										canSpawn = false
								end
							end

							if canSpawn then
								local model = GetHashKey(vehicleSpawn.model)
								RequestModel(model)
								while not HasModelLoaded(model) do
									Wait(1)
								end
								local vehicle = CreateVehicle(model, vehicleSpawn.x, vehicleSpawn.y, vehicleSpawn.z,
									vehicleSpawn.h, true, false)
								DecorSetInt(vehicle, "_STP_VEHICLE", i)
								SetVehicleAsNoLongerNeeded(vehicle)
							end
						end
				end
			end
		end
	end
end)